# Пример соревнований по спидкубингу, проведённых с помощью телеграмм-бота "Speedcubing Competition Bot"

### Подготовка
1. Организаторы создают новое соревнование, называют его "Сходка 11.10.2025"
2. Организаторы выбирают дисциплины, которые будут включены в это соревнование: кубик Рубика 2x2 и кубик Рубика 3x3
3. Организаторы отправляют боту 5 фотографий скрамблов (алгоритмов перемешивания) для кубика Рубика 2x2 и 5 фотографий скрамблов для кубика Рубика 3x3
4. Организаторы охраняют соревнование и получают id этого соревнования в боте.
5. Организаторы оповещают участников о начале соревнований и отправляют им id этих соревнований.

### Ход соревнований
1. На участие зарегистрировалось 4 человека: Иван Иванов, Пётр Петров, Василий Смирнов и Артём Сидоров.
2. Каждый из них принимает участие в обоих из предложенных дисциплин
3. После получения скрамблов каждый из участников делает 5 сборок каждой головоломки. При отправке ответов по конкретной дисциплине в окно ввода текста в Telegramm автоматически вставляется следующее сообщение:
   "Дисциплина: *дисциплина, по которой участники отправляют свои результаты (например, "Кубик 2x2"). Эта надпись вставляется автоматически в зависимости от того, по какой дисциплине в данный момент участники отправляют результаты*
    Сборка 1:
    Сборка 2:
    Сборка 3:
    Сборка 4:
    Сборка 5:
    "
Участники соревнований заполняют это сообщение, соблюдая строгий формат записи, например: 0.11.34, где 0 - минуты, 11 - секунды, 34 - миллисекунды. Если участник ввёл значение времени в нерравильном формате, бот выдаёт сообщение об ошибке и просит повторить ввод. После ввода значений времени в сообщение участник отправляют его боту. Бот записывает значения времени сборки при каждой попытке в таблицу, соответствующую конкретной дисциплине.

### Подсчёт результатов
1. По итогам соревнований в таблице по каждой дисциплине оказались значения времени, за которое участники собрали головолмку при конкретной попытке. Приведу пример для дисциплины "Кубик Рубика 2x2" (подсчёт значений для кубика 3x3 работает также): 
        1. Иван Иванов - 1 сек, 2 сек,  3 сек, 4 сек, 5 сек.
        2. Пётр Петров -  0.5 сек, 2 сек,  3 сек, 4 сек, 5 сек.
        3. Василий Смирнов - 5 сек, 5 сек,  5 сек, 4 сек, DNF.
        4. Артём Сидоров - 7 сек, 8 сек,  8 сек, DNF, DNF.
2. Бот составляет таблицу лидеров, подсчитывая среднее время каждого участника согласно правилам WCA (World Cube Association). В данном случае бот должен отбросить лучшую и худшую попытку каждого участника и посчитать среднее арифметическое из 3-х оставшихся попыток. Получаются такие значения среднего:
        1. Иван Иванов - 3 сек (Не учитываются: 5 сек - худшая попытка, 1 сек - лучшая).
        2. Пётр Петров -  3 сек (Не учитываются: 5 сек - худшая попытка, 0.5 сек - лучшая).
        3. Василий Смирнов - 5 сек (Не учитываются: DNF - худшая попытка, 4 сек - лучшая).
        4. Артём Сидоров - DNF (Так как у этого участника при двух попытках сборки результатом является DNF).
Но! У Ивана Иванова и Петра Петрова получилось одинаковое значение среднего времени! Чтобы определить, кто из них займёт первую строчку, бот сравнивает лучшее время из 5 попыток:
    У Ивана Иванова время лучшей попытки - 1 секунда,
    У Петра Петрова время лучшей попытки - 0.5 секунд.
У Петра Петрова время лучшей попытки меньше, чем у Ивана Иванова! Значит именно Пётр Петров займёт первую строчку таблицы лидеров в дисциплине "Кубик Рубика 2x2". 

3. Исходя из пунктов 1 и 2, бот формирует итоговую таблицу лидеров в дисциплине "Кубик Рубика 2x2". Она будет выглядеть так:
        1. Пётр Петров (Среднее время - 3 секунды)
        2. Иван Иванов (Среднее время - 3 секунды)
        3. Василий Смирнов (Среднее время - 5 секунд)
        4. Артём Сидоров (Среднее время - DNF)

4. Последним этапом является формирования итоговой таблицы лидеров, учитывающей все дисциплины. Так как значением среднего времени Артёма Сидорова является DNF, он получает 0 баллов в общий зачёт и не учитывается при подсчёте баллов остальных участников. Баллы остальных участников расчитываются по формуле X = Y - N + 1, где X - количество баллов, которое получает участник за данную дисциплину, Y - количество участников, результатом среднего времени сборки данной дисциплины которых не является DNF, N - место участника в таблице лидеров по данной дисциплине. 
Значит, баллы за участие в данной дисциплине распределяться следующим образом.
*В данной ситуации Y = 3, т.к. результат среднего времени сборки дисциплины "Кубик Рубика 2x2" у Артёма Сидорова равен DNF, а значит он не учитывается при подсчёте баллов.*
        1. Пётр Петров = 3 - 1 + 1 = 3 балла
        2. Иван Иванов = 3 - 2 + 1 = 2 балла
        3. Василий Смирнов = 3 - 3 + 1 = 1 балл
        4. Артём Сидоров = 0 (т.к. результат его среднего времени - DNF).